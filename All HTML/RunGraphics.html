<!DOCTYPE html>

<html>

    <head>
        <title>Skulpt Project For Graphics Module</title>
        <script src="../dist/skulpt.min.js" type="text/javascript"></script>
        <script src="../dist/skulpt-stdlib.js" type="text/javascript"></script>
    </head>

    <body>

        <header>
            <a href="MyFirstModule.html">1. My Module</a>
            <br>
            <a href="RunTurtle.html">2. Turtle Module</a>
            <br>
            <a href="RunProcessing.html">3. Processing Module</a>
            <br>
            <a href="RunGraphics.html">4. Graphics Module</a>
        </header>

        <script type="text/javascript">
            // output functions are configurable.  This one just appends some text
            // to a pre element.
            function outf(text) {
                var mypre = document.getElementById("output");
                mypre.innerHTML = mypre.innerHTML + text;
            }
            function builtinRead(x) {
                if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
                    throw "File not found: '" + x + "'";
                return Sk.builtinFiles["files"][x];
            }
            // Here's everything you need to run a python program in skulpt
            // grab the code from your textarea
            // get a reference to your pre element for output
            // configure the output function
            // call Sk.importMainWithBody()
            function runit() {
                var prog = document.getElementById("yourcode").value;
                var mypre = document.getElementById("output");
                mypre.innerHTML = '';
                Sk.pre = "output";
                Sk.configure({output:outf, read:builtinRead});
                (Sk.graphics || (Sk.graphics = {})).target = 'mycanvas';
                var myPromise = Sk.misceval.asyncToPromise(function() {
                    return Sk.importMainWithBody("<stdin>", false, prog, true);
                });
                myPromise.then(function(mod) {
                            console.log('success');
                        },
                        function(err) {
                            console.log(err.toString());
                        });
            }
        </script>

        <h3>Try this only for Turtle </h3>
        <form>
        <textarea id="yourcode" cols="40" rows="10">

import graphics

        </textarea><br />
            <button type="button" onclick="runit()">Run</button>
        </form>
        <pre id="output" ></pre>
        <!-- If you want turtle graphics include a canvas -->
        <div id="mycanvas"></div>

    </body>
</html>